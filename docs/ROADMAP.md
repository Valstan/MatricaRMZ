# MatricaRMZ — Roadmap разработки

Актуально для состояния после `v0.0.29` (монорепо: `backend-api` + `electron-app`).

## 0) Базовая стабильность (перед расширением функций)
- **Дублировать permission-check в main/IPC для write-операций** (не полагаться только на UI): `engine:create`, `engine:setAttr`, `ops:add`, `admin:*:upsert`, `admin:entities:setAttr`, `admin:entities:softDelete`, `sync:run`, etc.
- **Единый аудит**:
  - Локально: фиксировать actor (`username` из session), действие и entityId (уже есть `audit` — расширить покрытие).
  - На сервере: хранить audit trail для операций синхронизации/админки.
- **Прод-обвязка**:
  - systemd (`matricarmz-backend.service`) + проверка env (`MATRICA_JWT_SECRET`) + мониторинг логов.
  - Бэкапы PostgreSQL (cron + retention) и документирование процедуры восстановления.

## 1) Мастер-данные (EAV справочники) — довести до удобного “прод”
- **Валидации и ограничения**:
  - уникальность `entity_types.code`, `attribute_defs.code` в рамках типа;
  - обязательные поля и понятные ошибки в UI;
  - сортировка атрибутов и управляемый порядок отображения.
- **Импорт/экспорт справочников** (CSV/JSON) под `masterdata.edit`.
- **UX для link-полей**:
  - поиск/фильтр в больших списках;
  - отображение “label” вместо id (консистентно во всех местах).

## 2) Двигатели и операции (основной рабочий контур)
- **Справочник стадий/операций** вместо захардкоженного списка в UI:
  - операции как master-data (тип `operation_type`) и статусы как справочник;
  - цветовые бейджи статусов и быстрые фильтры/поиск.
- **Карточка двигателя**:
  - улучшить печатную форму (шаблон + настройки + вывод связей/реквизитов);
  - “быстрые действия” по стадиям.

## 3) Отчёты (практическая аналитика)
- **Новые отчёты**:
  - SLA/время на стадиях, узкие места, динамика по периодам.
- **Экспорт**:
  - XLSX (для бухгалтерии/управления), шаблоны выгрузок.

## 4) Синхронизация и обновления (эксплуатация)
- **Надёжность sync**:
  - явные retry/backoff, дружелюбные сообщения ошибок;
  - “health dashboard” для диагностики (права: `sync.use`).
- **Обновления**:
  - оформить процесс релизов (см. `RELEASE.md`), добавить удобную историю версий в UI.

## 5) Модуль “Дефектный акт” (следующий крупный блок)
Использовать уже заведённые permission-коды `defect_act.view/edit/print`:
- UI ввода/хранения дефектов;
- печатные формы (шаблоны);
- связка с двигателем и операциями.


