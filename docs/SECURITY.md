# Безопасность и секреты (MatricaRMZ)

## Главный принцип
**Секреты не храним в GitHub и в репозитории.** Никаких паролей/токенов/ключей в коде и документации.

## Где должны храниться секреты
- **Только на сервере (VPS)**: файлы `.env`, systemd/PM2 env, приватные ключи.
- **В GitHub**: допускаются только **GitHub Actions Secrets** (они не попадают в git и не видны в логах при правильном использовании).

## Что считаем секретами
- пароли БД (PostgreSQL), JWT/refresh keys (когда появятся), API ключи
- токены GitHub (PAT), ключи доступа к облачным хранилищам
- приватные ключи (SSH, TLS)

## Правила для проекта
1. `.env` файлы **никогда не коммитим** (они игнорируются `.gitignore`).
2. В `.env.example`/`env.example.txt` — только шаблоны (`CHANGE_ME`), без реальных значений.
3. В документации — только примеры и “заглушки”, без реальных паролей.
4. Backend читает конфиг из переменных окружения (`PGHOST/PGUSER/PGPASSWORD/...`).
5. Если секрет попал в git случайно:
   - немедленно **ротируем** (меняем) секрет на сервере;
   - удаляем упоминания из файлов;
   - при необходимости переписываем историю (git filter-repo).

## Рекомендация по CI/CD
Используем GitHub Actions для сборки релизов. Если нужен токен/ключ:
- кладем его в **GitHub Actions Secrets**
- в workflow используем через `${{ secrets.NAME }}` (не печатать в лог)


